<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>NX-CheatSheet</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="temp_style.css" />
</head>
<body>
<h1 id="nx-cheat-sheet">NX Cheat Sheet</h1>
<h2 id="class-definition">Class Definition</h2>
<h3 id="basic-class-creation">Basic Class Creation</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>nx::Class <span class="ot">create</span> ClassName ?-superclass SuperClass? <span class="kw">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Class definition</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="class-options">Class Options</h3>
<ul>
<li><code>-superclass</code>: Specify parent class(es)</li>
<li><code>-metaclass</code>: Specify metaclass</li>
<li><code>-mixin</code>: Add mixin classes</li>
<li><code>-filter</code>: Add filter methods</li>
<li><code>-volatile</code>: Make class non-persistent</li>
</ul>
<h2 id="method-definition">Method Definition</h2>
<h3 id="method-types">Method Types</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>                    # Standard method</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>:public method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>            # Public method</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>:protected method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>         # Protected method</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>:private method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>           # Private method</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>:abstract method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span>                 # Abstract method</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>:forward <span class="ot">name</span> targetObj targetMethod         # Forward method</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>:alias <span class="ot">name</span> targetMethod                     # Alias method</span></code></pre></div>
<h3 id="method-options">Method Options</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -returns</span> <span class="ot">type</span>                        # Specify <span class="kw">return</span> <span class="ot">type</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -deprecated</span> <span class="kw">message</span>                  # Mark as deprecated</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -debug</span> <span class="ot">level</span>                         # Set <span class="ot">debug</span> <span class="ot">level</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -precondition</span> <span class="ot">script</span>                 # Add precondition</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -postcondition</span> <span class="ot">script</span>               # Add postcondition</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -volatile</span>                           # Non-persistent method</span></code></pre></div>
<h3 id="parameter-types">Parameter Types</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    arg1:<span class="ot">type</span>                               # Type constraint</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    -arg2:<span class="ot">type</span>                              # Named parameter</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    ?-arg3:<span class="ot">type</span>?                            # Optional parameter</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">args</span>:<span class="ot">type</span>,<span class="dv">1</span>..*                          # Variable <span class="ot">args</span> with multiplicity</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="property-definition">Property Definition</h2>
<h3 id="property-types">Property Types</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>                              # Simple property</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span><span class="kw">}</span>                       # Typed property</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span> <span class="ot">default</span><span class="kw">}</span>               # Property with <span class="ot">default</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span>,constraint value<span class="kw">}</span>      # Property with constraint</span></code></pre></div>
<h3 id="property-options">Property Options</h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> public|protected|private # Access control</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -configurable</span> boolean             # Allow configuration</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -incremental</span> boolean              # Support incremental updates</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -trace</span> <span class="ot">script</span>                     # Add <span class="kw">trace</span></span></code></pre></div>
<h2 id="type-system">Type System</h2>
<h3 id="built-in-types">Built-in Types</h3>
<ul>
<li><code>integer</code>: Integer numbers</li>
<li><code>double</code>: Floating point numbers</li>
<li><code>boolean</code>: Boolean values</li>
<li><code>string</code>: String values</li>
<li><code>list</code>: List values</li>
<li><code>dict</code>: Dictionary values</li>
<li><code>object</code>: Object references</li>
<li><code>class</code>: Class references</li>
<li><code>any</code>: Any type</li>
</ul>
<h3 id="type-constraints">Type Constraints</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic constraints</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,nonNegative                           # Non-negative <span class="ot">values</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,positive                              # Positive <span class="ot">values</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,<span class="ot">range</span>,min..max                        # Value <span class="ot">range</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,enum,<span class="kw">{</span>val1 val2 ...<span class="kw">}</span>                  # Enumeration</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,<span class="kw">regexp</span>,pattern                        # Regular expression <span class="ot">match</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiplicity constraints</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,<span class="dv">0</span>..<span class="dv">1</span>                                  # Optional (<span class="dv">0</span> or <span class="dv">1</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,<span class="dv">1</span>..<span class="dv">1</span>                                  # Required (exactly <span class="dv">1</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,<span class="dv">0</span>..*                                  # Any <span class="ot">number</span> (<span class="dv">0</span> or more)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,<span class="dv">1</span>..*                                  # At least <span class="dv">1</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="ot">type</span>,n..m                                  # Between n and m</span></code></pre></div>
<h2 id="object-system">Object System</h2>
<h3 id="object-creation">Object Creation</h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$class</span> new ?options? ?<span class="ot">args</span>?                # Create new object</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dt">$class</span> <span class="ot">create</span> <span class="ot">name</span> ?<span class="ot">args</span>?                 # Create named object</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Options:</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>-childof <span class="ot">parent</span>     # Parent object/<span class="kw">namespace</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>-noinit            # Skip initialization</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>-volatile          # Create volatile object</span></code></pre></div>
<h3 id="object-methods">Object Methods</h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">destroy</span>                               # Destroy object</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span>                                  # Get object <span class="kw">info</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="ot">configure -prop</span> val                   # Configure property</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="ot">cget -prop</span>                           # Get property value</span></code></pre></div>
<h3 id="introspection-commands">Introspection Commands</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> <span class="ot">class</span>                           # Get <span class="ot">class</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> methods ?pattern?               # List methods</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> properties ?pattern?            # List properties</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> slots ?pattern?                # List slots</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> <span class="ot">vars</span> ?pattern?                 # List variables</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> heritage                       # List superclasses</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> mixins                         # List mixins</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> filters                        # List filters</span></code></pre></div>
<h2 id="aspect-oriented-programming">Aspect-Oriented Programming</h2>
<h3 id="filters">Filters</h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>:filter <span class="ot">name</span>                              # Add filter</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>:filter <span class="ot">delete</span> <span class="ot">name</span>                       # Remove filter</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>:public filter <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>         # Define filter</span></code></pre></div>
<h3 id="mixins">Mixins</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>:mixin <span class="ot">add</span> MixinClass                     # Add mixin</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>:mixin <span class="ot">delete</span> MixinClass                  # Remove mixin</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>:mixin <span class="kw">set</span> <span class="kw">{</span>Class1 Class2<span class="kw">}</span>                # Set mixins</span></code></pre></div>
<h2 id="error-handling">Error Handling</h2>
<h3 id="error-commands">Error Commands</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">error</span> <span class="kw">message</span>                             # Raise <span class="kw">error</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>throw <span class="ot">type</span> <span class="kw">message</span>                        # Throw <span class="kw">error</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">return</span><span class="ot"> -code</span> <span class="kw">error</span> <span class="kw">message</span>               # Return <span class="kw">error</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>try <span class="kw">{</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># code</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> trap <span class="ot">type</span> <span class="kw">{</span>err opts<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># handler</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> finally <span class="kw">{</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># cleanup</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="best-practices">Best Practices</h2>
<h3 id="naming-conventions">Naming Conventions</h3>
<ul>
<li>Class names: UpperCamelCase</li>
<li>Method names: lowerCamelCase</li>
<li>Property names: lowerCamelCase</li>
<li>Private members: _prefixWithUnderscore</li>
</ul>
<h3 id="protection-levels">Protection Levels</h3>
<ul>
<li><code>public</code>: External interface</li>
<li><code>protected</code>: Inheritance interface</li>
<li><code>private</code>: Internal implementation</li>
</ul>
<h3 id="documentation">Documentation</h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Class documentation</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>nx::Class <span class="ot">create</span> ClassName <span class="kw">{</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    :property <span class="kw">{</span>description <span class="st">&quot;Class description&quot;</span><span class="kw">}</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method documentation</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    :public method <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>        arg1:<span class="ot">type</span>                         # Arg description</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>        -arg2:<span class="ot">type</span>                        # Named arg description</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Implementation</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="testing">Testing</h3>
<div class="sourceCode" id="cb15"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span> <span class="ot">require</span> nx::test</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>nx::test <span class="kw">case</span> TestName <span class="kw">{</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    :method setup <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Setup code</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    :method teardown <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Cleanup code</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    :method test-feature <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Test code</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="common-patterns">Common Patterns</h2>
<h3 id="singleton">Singleton</h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>nx::Class <span class="ot">create</span> Singleton <span class="kw">{</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    :property instance:object,<span class="dv">0</span>..<span class="dv">1</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    :public method new <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[info</span> <span class="ot">exists</span> :instance<span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>            <span class="kw">set</span> :instance <span class="kw">[</span>next <span class="kw">{</span>*<span class="kw">}</span><span class="dt">$args</span><span class="kw">]</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">}</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="dt">${:instance}</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="observer">Observer</h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>nx::Class <span class="ot">create</span> Subject <span class="kw">{</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    :property observers:<span class="kw">list</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    :public method notify <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">foreach</span> observer <span class="dt">${:observers}</span> <span class="kw">{</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>            <span class="dt">$observer</span> <span class="kw">update</span> <span class="kw">{</span>*<span class="kw">}</span><span class="dt">$args</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">}</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="factory">Factory</h3>
<div class="sourceCode" id="cb18"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>nx::Class <span class="ot">create</span> Factory <span class="kw">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    :public method <span class="ot">create</span> <span class="kw">{</span><span class="ot">type</span> <span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="kw">[</span><span class="dt">${type}</span>Class new <span class="kw">{</span>*<span class="kw">}</span><span class="dt">$args</span><span class="kw">]</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="advanced-features">Advanced Features</h2>
<h3 id="ensemble-methods">Ensemble Methods</h3>
<div class="sourceCode" id="cb19"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>:public ensemble method <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    submethod1 <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    submethod2 <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="ot">name</span> submethod1 <span class="ot">args</span></span></code></pre></div>
<h3 id="method-requirements">Method Requirements</h3>
<div class="sourceCode" id="cb20"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>:<span class="ot">require</span> <span class="kw">{</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">{</span>method1 <span class="st">&quot;Error if missing&quot;</span><span class="kw">}</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">{</span>method2 <span class="st">&quot;Another required method&quot;</span><span class="kw">}</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="method-forwarding">Method Forwarding</h3>
<h4 id="basic-forwarding">Basic Forwarding</h4>
<div class="sourceCode" id="cb21"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward to a procedure</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>:public forward methodName targetObject %<span class="kw">proc</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward to a method</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>:public forward methodName targetObject %method</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward with frame specification</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>:public forward methodName<span class="ot"> -frame</span> object someCommand</span></code></pre></div>
<h4 id="advanced-forwarding-patterns">Advanced Forwarding Patterns</h4>
<h5 id="argument-handling">Argument Handling</h5>
<div class="sourceCode" id="cb22"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward with fixed arguments</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>:public forward foo target %<span class="kw">proc</span> %self a1 a2    # Adds a1 a2 to every call</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward with special placeholders</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>:public forward foo target %<span class="kw">proc</span> %self %%self %%p  # %% escapes % placeholders</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward with argument transformation</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>:public forward addOne <span class="kw">expr</span> <span class="dv">1</span> +                 # Transforms <span class="ot">args</span> <span class="kw">for</span> <span class="kw">expr</span></span></code></pre></div>
<h5 id="prefix-based-forwarding">Prefix-Based Forwarding</h5>
<div class="sourceCode" id="cb23"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward with prefix handling</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>:public forward Info<span class="ot"> -prefix</span> @ InfoObject %<span class="dv">1</span> %self</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage examples</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>obj Info <span class="ot">class</span>      # Calls InfoObject @class obj</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>obj Info mixin      # Calls InfoObject @mixin obj</span></code></pre></div>
<h5 id="introspection">Introspection</h5>
<div class="sourceCode" id="cb24"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List all forwarders</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> forwarder</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get forwarder definition</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method definition methodName</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check specific forwarders</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> forwarder pattern*    # Pattern matching</span></code></pre></div>
<h5 id="scoped-forwarding">Scoped Forwarding</h5>
<div class="sourceCode" id="cb25"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward in object scope</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>:public forward Incr<span class="ot"> -frame</span> object <span class="kw">incr</span>      # Executes in object&#39;s scope</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Property access via forwarding</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">x</span> <span class="dv">1</span><span class="kw">}</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>:public forward incrementX<span class="ot"> -frame</span> object <span class="kw">incr</span> <span class="ot">x</span></span></code></pre></div>
<h5 id="optional-target-commands">Optional Target Commands</h5>
<div class="sourceCode" id="cb26"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward without explicit target</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>:public forward <span class="kw">append</span><span class="ot"> -frame</span> object         # Uses built-in <span class="kw">append</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward to namespaced commands</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>:public forward ::<span class="kw">namespace</span>::cmd             # Direct <span class="kw">namespace</span> forward</span></code></pre></div>
<h3 id="method-interception">Method Interception</h3>
<div class="sourceCode" id="cb27"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter definition</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>:public filter <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pre-processing</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> result <span class="kw">[</span>next <span class="kw">{</span>*<span class="kw">}</span><span class="dt">$args</span><span class="kw">]</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Post-processing</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">$result</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter application</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>:filter <span class="ot">add</span> <span class="ot">name</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>:filter <span class="ot">delete</span> <span class="ot">name</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>:filter <span class="kw">set</span> <span class="kw">{</span>filter1 filter2<span class="kw">}</span></span></code></pre></div>
<h2 id="object-lifecycle">Object Lifecycle</h2>
<h3 id="creation">Creation</h3>
<div class="sourceCode" id="cb28"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$class</span> new ?options? ?<span class="ot">args</span>?                # Create new object</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="dt">$class</span> <span class="ot">create</span> <span class="ot">name</span> ?<span class="ot">args</span>?                 # Create named object</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>::nsf::object::alloc <span class="ot">class</span> ?<span class="ot">name</span>?       # Allocate object</span></code></pre></div>
<h3 id="initialization">Initialization</h3>
<div class="sourceCode" id="cb29"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>:public method init <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    next                                  # Call parent&#39;s init</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initialization code</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="destruction">Destruction</h3>
<div class="sourceCode" id="cb30"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>:public method <span class="kw">destroy</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Cleanup code</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    next                                  # Call parent&#39;s <span class="kw">destroy</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="method-resolution">Method Resolution</h2>
<h3 id="method-lookup">Method Lookup</h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>next                                      # Call next method in chain</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>self                                     # Reference to <span class="ot">current</span> object</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>:                                      # Call method on self</span></code></pre></div>
<h3 id="method-precedence">Method Precedence</h3>
<ol type="1">
<li>Per-object Mixins</li>
<li>Per-class Mixins</li>
<li>Object-specific Methods</li>
<li>Intrinsic Class Hierarchy</li>
</ol>
<h3 id="method-introspection">Method Introspection</h3>
<div class="sourceCode" id="cb32"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method <span class="ot">args</span> methodName         # Get method arguments</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method <span class="ot">body</span> methodName         # Get method <span class="ot">body</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method definition methodName   # Get full definition</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method <span class="ot">exists</span> methodName       # Check <span class="kw">if</span> method <span class="ot">exists</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method <span class="ot">handle</span> methodName       # Get method <span class="ot">handle</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method origin methodName       # Get method origin</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method parameters methodName   # Get parameter <span class="kw">info</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method syntax methodName       # Get method syntax</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method <span class="ot">type</span> methodName         # Get method <span class="ot">type</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method submethods methodName   # Get submethods</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method returns methodName      # Get <span class="kw">return</span> <span class="ot">type</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method callprotection methodName # Get protection <span class="ot">level</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method deprecated methodName   # Get deprecation <span class="ot">status</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="kw">info</span> method <span class="ot">debug</span> methodName        # Get <span class="ot">debug</span> <span class="ot">status</span></span></code></pre></div>
<h2 id="variables-and-properties">Variables and Properties</h2>
<h3 id="variable-scopes">Variable Scopes</h3>
<div class="sourceCode" id="cb33"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> localVar <span class="st">&quot;value&quot;</span>                      # Method-scoped <span class="kw">variable</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> :instanceVar <span class="st">&quot;value&quot;</span>                  # Instance <span class="kw">variable</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> ::globalVar <span class="st">&quot;value&quot;</span>                   # Global <span class="kw">variable</span></span></code></pre></div>
<h3 id="property-features">Property Features</h3>
<div class="sourceCode" id="cb34"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:required                    # Required property</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span> <span class="ot">default</span><span class="kw">}</span>             # Typed property with <span class="ot">default</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span>,constraint value<span class="kw">}</span>    # Property with constraint</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> public|protected|private # Access control</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -configurable</span> boolean           # Allow configuration</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -incremental</span> boolean            # Support incremental updates</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -trace</span> <span class="ot">script</span>                   # Add <span class="kw">trace</span></span></code></pre></div>
<h3 id="property-access">Property Access</h3>
<div class="sourceCode" id="cb35"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="ot">cget -propertyname</span>                   # Get property value</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> <span class="ot">configure -propertyname</span> value        # Set property value</span></code></pre></div>
<h2 id="object-variables-and-properties">Object Variables and
Properties</h2>
<h3 id="object-variable-command">Object Variable Command</h3>
<div class="sourceCode" id="cb36"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> object <span class="kw">variable</span> ?options? spec ?defaultValue?</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Options:</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>-accessor value        # Access <span class="ot">level</span> (none|public|protected|private)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>-<span class="ot">class</span> className      # Variable <span class="ot">class</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>-configurable bool   # Make configurable</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>-incremental        # Enable incremental operations</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>-initblock <span class="ot">script</span>  # Initialization block</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>-nocomplain       # Don&#39;t complain about existing variables</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>-<span class="kw">trace</span> ops       # Trace operations</span></code></pre></div>
<h3 id="object-property-command">Object Property Command</h3>
<div class="sourceCode" id="cb37"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> object property ?options? spec ?initblock?</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Options:</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>-accessor value        # Access <span class="ot">level</span> (public|protected|private)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>-<span class="ot">class</span> className      # Property <span class="ot">class</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>-configurable bool   # Make configurable (<span class="ot">default</span>: true)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>-incremental        # Enable incremental operations</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>-nocomplain       # Don&#39;t complain about existing properties</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>-<span class="kw">trace</span> ops       # Trace operations</span></code></pre></div>
<h2 id="configuration-and-utilities">Configuration and Utilities</h2>
<h3 id="nx-configuration">NX Configuration</h3>
<div class="sourceCode" id="cb38"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>::nx::<span class="ot">configure</span> defaultMethodCallProtection ?value?    # Get/<span class="kw">set</span> <span class="ot">default</span> method protection</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>::nx::<span class="ot">configure</span> defaultAccessor ?value?               # Get/<span class="kw">set</span> <span class="ot">default</span> accessor</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Default Method Protection</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>true                    # Methods are protected by <span class="ot">default</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>false                  # Methods are public by <span class="ot">default</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Default Accessor Values</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>public                # Public access</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>protected           # Protected access</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>private            # Private access</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>none              # No accessor</span></code></pre></div>
<h3 id="method-properties">Method Properties</h3>
<div class="sourceCode" id="cb39"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>::nsf::method::property <span class="ot">class</span> method property value     # Set method property</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>::nsf::method::property <span class="ot">class -per</span>-object method prop value  # Set object method property</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Common Properties</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>call-protected          # Protected method</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>call-private           # Private method</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="ot">class</span>-only            # Class-only method</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>returns              # Return <span class="ot">type</span></span></code></pre></div>
<h3 id="method-assertions">Method Assertions</h3>
<div class="sourceCode" id="cb40"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>::nsf::method::assertion obj check <span class="ot">script</span>          # Set check assertion</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>::nsf::method::assertion obj <span class="ot">class</span>-invar <span class="ot">script</span>   # Set <span class="ot">class</span> invariant</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>::nsf::method::assertion obj object-invar <span class="ot">script</span> # Set object invariant</span></code></pre></div>
<h2 id="variable-access-commands">Variable Access Commands</h2>
<h3 id="variable-ensemble">Variable Ensemble</h3>
<div class="sourceCode" id="cb41"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>::nx::var <span class="ot">exists</span> obj var          # Check <span class="kw">if</span> <span class="kw">variable</span> <span class="ot">exists</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>::nx::var <span class="ot">get</span> obj var           # Get <span class="kw">variable</span> value</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>::nx::var import obj var       # Import <span class="kw">variable</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>::nx::var <span class="kw">set</span> obj var value  # Set <span class="kw">variable</span> value</span></code></pre></div>
<h3 id="parameter-syntax">Parameter Syntax</h3>
<div class="sourceCode" id="cb42"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mixin Operations</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ot">add</span> <span class="ot">class</span>                # Add mixin <span class="ot">class</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>classes ?pattern?       # List mixin classes</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="ot">clear</span>                  # Clear all mixins</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="ot">delete</span> <span class="ot">class</span>          # Delete mixin <span class="ot">class</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="ot">get</span>                  # Get mixins</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>guard <span class="ot">class</span> ?<span class="kw">expr</span>?  # Set mixin guard</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> classes        # Set mixins</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter Operations</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="ot">add</span> filter                # Add filter</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="ot">clear</span>                   # Clear all filters</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="ot">delete</span> filter          # Delete filter</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="ot">get</span>                   # Get filters</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>guard filter ?<span class="kw">expr</span>?  # Set filter guard</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>methods ?pattern?   # List filter methods</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> filters        # Set filters</span></code></pre></div>
<h3 id="system-configuration">System Configuration</h3>
<div class="sourceCode" id="cb43"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>::nx::confdir           # Configuration directory (~/.nx)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>::nx::logdir           # Log directory (~/.nx/log)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>::nsf::<span class="ot">configure</span> <span class="ot">debug</span> <span class="ot">level</span>  # Set <span class="ot">debug</span> <span class="ot">level</span> (<span class="dv">0-2</span>)</span></code></pre></div>
<h3 id="exported-commands">Exported Commands</h3>
<div class="sourceCode" id="cb44"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>::nx::Object          # Base object <span class="ot">class</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>::nx::Class          # Base <span class="ot">class</span> <span class="ot">class</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>::nx::next          # Call next method</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>::nx::self         # Get <span class="ot">current</span> object</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>::nx::<span class="ot">current</span>     # Get <span class="ot">current</span> context</span></code></pre></div>
<h2 id="namespace-and-object-containment">Namespace and Object
Containment</h2>
<h3 id="contains-method">Contains Method</h3>
<div class="sourceCode" id="cb45"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="dt">$obj</span> contains <span class="kw">{</span><span class="ot">script</span><span class="kw">}</span>                     # Execute <span class="ot">script</span> in object&#39;s <span class="kw">namespace</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>:contains <span class="kw">{</span><span class="ot">script</span><span class="kw">}</span>                         # Execute <span class="ot">script</span> in <span class="ot">current</span> object&#39;s <span class="kw">namespace</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Example:</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>nx::Object <span class="ot">create</span> <span class="ot">parent -contains</span> <span class="kw">{</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    nx::Object <span class="ot">create</span> child               # Creates child in parent&#39;s <span class="kw">namespace</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    ? <span class="kw">{</span>self<span class="kw">}</span>                             # Returns ::<span class="ot">parent</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    ? <span class="kw">{namespace</span> <span class="ot">current</span><span class="kw">}</span>                # Returns ::<span class="ot">parent</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="namespace-context">Namespace Context</h3>
<div class="sourceCode" id="cb46"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>self                                      # Get <span class="ot">current</span> object</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> <span class="ot">current</span>                         # Get <span class="ot">current</span> <span class="kw">namespace</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> path                           # Get/<span class="kw">set</span> <span class="kw">namespace</span> path</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Example:</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>nx::Class <span class="ot">create</span> MyClass <span class="kw">{</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    :public method getContext <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="st">&quot;[self]-[namespace current]&quot;</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="error-handling-in-contains">Error Handling in Contains</h3>
<div class="sourceCode" id="cb47"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Error propagation from contains block</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> <span class="kw">{</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">$obj</span> contains <span class="kw">{</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span><span class="ot"> -code</span> <span class="kw">error</span><span class="ot"> -errorcode</span> MYERR <span class="st">&quot;Error message&quot;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> msg opts</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Error info preservation</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="kw">dict</span> <span class="ot">get</span> <span class="dt">$opts</span><span class="ot"> -errorcode</span>               # Get <span class="kw">error</span> code</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="kw">dict</span> <span class="ot">get</span> <span class="dt">$opts</span><span class="ot"> -errorinfo</span>              # Get <span class="kw">error</span> stack <span class="kw">trace</span></span></code></pre></div>
<h3 id="object-system-restrictions">Object System Restrictions</h3>
<div class="sourceCode" id="cb48"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cannot mix object systems in class hierarchy</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>::nx::Class <span class="ot">create</span> C1<span class="ot"> -superclass</span> ::nx::Object     # Valid</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>::xotcl::Class <span class="ot">create</span> C0<span class="ot"> -superclass</span> ::nx::Object  # Invalid - different object systems</span></code></pre></div>
<h2 id="object-destruction-and-cleanup">Object Destruction and
Cleanup</h2>
<h3 id="destroy-method-patterns">Destroy Method Patterns</h3>
<div class="sourceCode" id="cb49"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic destruction</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>:method <span class="kw">destroy</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Cleanup code</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    next                                  # Call parent&#39;s <span class="kw">destroy</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Blocking destruction (object survives)</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>:method <span class="kw">destroy</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Cleanup code only</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Not calling next prevents object deletion</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Destruction with verification</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>:method <span class="kw">destroy</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pre-destroy checks</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{[</span>some_condition<span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>        next                             # Allow destruction</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Object survives if next not called</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="object-recreation">Object Recreation</h3>
<div class="sourceCode" id="cb50"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recreate object with same name</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[</span>:<span class="kw">info</span> <span class="ot">class</span><span class="kw">]</span> <span class="ot">create</span> <span class="kw">[</span>self<span class="kw">]</span>              # Recreate <span class="ot">current</span> object</span></code></pre></div>
<h3 id="command-handling">Command Handling</h3>
<div class="sourceCode" id="cb51"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename object command</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="dt">$obj</span> <span class="st">&quot;&quot;</span>                           # Triggers <span class="kw">destroy</span> method</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="dt">$obj</span> newname                      # Renames object <span class="ot">command</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Object existence check</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>::nsf::object::<span class="ot">exists</span> <span class="dt">$obj</span>              # Check <span class="kw">if</span> object <span class="ot">exists</span></span></code></pre></div>
<h3 id="cleanup-patterns">Cleanup Patterns</h3>
<div class="sourceCode" id="cb52"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>:method init <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initialize cleanup flags/state</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>:method <span class="kw">destroy</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Cleanup resources</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    :cleanup_resources</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Notify observers</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    :notify_destruction</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Final cleanup</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>    next</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Access during destruction</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>:method someMethod <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>    :<span class="kw">destroy</span>                            # Start destruction</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Object still accessible here</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    :<span class="kw">set</span> <span class="ot">x</span> <span class="dv">1</span>                           # Still works</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Object fully destroyed after method ends</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a><span class="co">### Advanced Argument Positioning</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>```tcl</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Position-based argument insertion</span></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>:public forward endArg <span class="kw">list</span> <span class="kw">{</span>%@end value<span class="kw">}</span>     # Add at end</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>:public forward firstArg <span class="kw">list</span> <span class="kw">{</span>%@<span class="dv">1</span> value<span class="kw">}</span>     # Add at beginning</span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>:public forward midArg <span class="kw">list</span> <span class="kw">{</span>%@<span class="dv">2</span> value<span class="kw">}</span>       # Add at position <span class="dv">2</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>:public forward beforeLastArg <span class="kw">list</span> <span class="kw">{</span>%@-<span class="dv">1</span> value<span class="kw">}</span> # Add before <span class="ot">last</span></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple positional arguments</span></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>:public forward complexArg <span class="kw">list</span> <span class="kw">{</span>%@<span class="dv">2</span> two<span class="kw">}</span> <span class="kw">{</span>%@<span class="dv">1</span> one<span class="kw">}</span> <span class="kw">{</span>%@<span class="dv">0</span> <span class="kw">list}</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Result: list one two ...rest of args...</span></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Combining with other substitutions</span></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>:public forward mixed <span class="kw">list</span> <span class="kw">{</span>%@end <span class="ot">last</span><span class="kw">}</span> %<span class="dv">1</span> %self</span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Result: list arg1 objName arg2 arg3 last</span></span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Expression evaluation</span></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>:public forward calc <span class="kw">expr</span> <span class="kw">{</span>%:<span class="kw">eval</span> <span class="kw">{set</span> :<span class="ot">x</span><span class="kw">}}</span> *  # Evaluates <span class="ot">x</span> value</span></code></pre></div>
<h3 id="forwarding-best-practices">Forwarding Best Practices</h3>
<div class="sourceCode" id="cb53"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Namespace-aware forwarding</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>:public forward ::ns::cmd                     # Forward to namespaced <span class="ot">command</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>:public forward cmd ::ns::target %method      # Forward to namespaced target</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Method prefix handling</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>:public forward Info<span class="ot"> -prefix</span> @ InfoObj %<span class="dv">1</span> %self</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates methods: Info class, Info mixin, etc.</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Frame control</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>:public forward increment<span class="ot"> -frame</span> object <span class="kw">incr</span> <span class="ot">x</span> # Execute in object scope</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>:public forward <span class="kw">eval</span><span class="ot"> -objframe</span> <span class="dv">1</span> <span class="kw">eval</span>         # Execute in object <span class="kw">frame</span></span></code></pre></div>
<h3 id="error-handling-in-forwards">Error Handling in Forwards</h3>
<div class="sourceCode" id="cb54"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guard conditions</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>:public forward <span class="ot">name</span> target %method<span class="ot"> -guard</span> <span class="kw">{expr}</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Target validation</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>:public forward cmd target</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[info</span> <span class="ot">exists</span> target<span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">error</span> <span class="st">&quot;Target not available&quot;</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Method existence check</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>:public forward <span class="ot">name</span> target %method</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[</span>target <span class="kw">info</span> methods <span class="ot">name</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">error</span> <span class="st">&quot;Method not found&quot;</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="method-definition-patterns">Method Definition Patterns</h2>
<h3 id="method-naming-rules">Method Naming Rules</h3>
<div class="sourceCode" id="cb55"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valid method names</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>:method validName <span class="kw">{}</span>                  # Simple <span class="ot">name</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>:method valid_name <span class="kw">{}</span>                 # With underscore</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>:method valid123 <span class="kw">{}</span>                   # With numbers</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>:method <span class="kw">{</span>#special<span class="kw">}</span> <span class="kw">{}</span>                 # Special prefix</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Invalid method names</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co"># - Empty names</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="co"># - Names with whitespace</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co"># - Names with tabs, newlines, or special chars</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="co"># - Names starting with colon in non-global namespace</span></span></code></pre></div>
<h3 id="method-types-and-visibility">Method Types and Visibility</h3>
<div class="sourceCode" id="cb56"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic method types</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>:method plain_method <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>:public method public_method <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>:protected method protected_method <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Object methods (class-level)</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>:object method class_method <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>:public object method public_class_method <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="method-registration-and-aliases">Method Registration and
Aliases</h3>
<div class="sourceCode" id="cb57"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method registration handle</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> <span class="ot">handle</span> <span class="kw">[</span>C <span class="kw">info</span> method registrationhandle methodName<span class="kw">]</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Method aliases</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>:alias plain_alias <span class="dt">$handle</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>:public alias public_alias <span class="dt">$handle</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>:protected alias protected_alias <span class="dt">$handle</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Method forwarding</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>:forward plain_forward %self otherMethod</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>:public forward public_forward %self otherMethod</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>:protected forward protected_forward %self otherMethod</span></code></pre></div>
<h3 id="property-methods">Property Methods</h3>
<div class="sourceCode" id="cb58"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Property with default accessor</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>:property plain_property</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Property with visibility-controlled accessor</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> public public_property</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> protected protected_property</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom property methods</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>:property myProp <span class="kw">{</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>    :public method <span class="ot">get</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="dt">${:myProp}</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    :protected method <span class="kw">set</span> <span class="kw">{</span>value<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">set</span> :myProp <span class="dt">$value</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="method-introspection-1">Method Introspection</h3>
<div class="sourceCode" id="cb59"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List methods</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods                      # All methods</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> method         # Only direct methods</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> forward        # Only forwards</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> alias          # Only aliases</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Method properties</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method definition methodName # Get method definition</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method <span class="ot">args</span> methodName       # Get method arguments</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method <span class="ot">body</span> methodName       # Get method <span class="ot">body</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method protection methodName # Get protection <span class="ot">level</span></span></code></pre></div>
<h3 id="best-practices-1">Best Practices</h3>
<div class="sourceCode" id="cb60"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method documentation</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>:public method documented <span class="kw">{</span>arg1 arg2<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method description</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># @param arg1 Description of arg1</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># @param arg2 Description of arg2</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># @return Description of return value</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Method parameter validation</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>:public method validated <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[llength</span> <span class="dt">$args</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">error</span> <span class="st">&quot;No arguments provided&quot;</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method body</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Method error handling</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>:public method withErrors <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>    try <span class="kw">{</span></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Risky operation</span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span> on <span class="kw">error</span> <span class="kw">{</span>msg opts<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Error handling</span></span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span><span class="ot"> -code</span> <span class="kw">error</span> <span class="dt">$msg</span></span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="method-protection-and-visibility">Method Protection and
Visibility</h2>
<h3 id="basic-protection-levels">Basic Protection Levels</h3>
<div class="sourceCode" id="cb61"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method visibility levels</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>:public method publicMethod <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>:protected method protectedMethod <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>:private method privateMethod <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Property visibility</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> public publicProp</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> protected protectedProp</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> private privateProp</span></code></pre></div>
<h3 id="call-protection">Call Protection</h3>
<div class="sourceCode" id="cb62"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set call protection</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>::nsf::method::property Class methodName call-protected true</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Unset call protection</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>::nsf::method::property Class methodName call-protected false</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check protection status</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>::nsf::method::property Class methodName call-protected</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Protected dispatch</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>nx::dispatch obj protectedMethod <span class="ot">args</span>  # Call protected method</span></code></pre></div>
<h3 id="internal-access">Internal Access</h3>
<div class="sourceCode" id="cb63"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Internal method calls (allowed)</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>:public method caller <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    :protectedMethod              # Access protected method</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    :privateMethod                # Access private method</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-instance calls</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>:public method crossCall <span class="kw">{</span>otherObj<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">$otherObj</span> protectedMethod       # Allowed within same <span class="ot">class</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">$otherObj</span> publicMethod          # Always allowed</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="filter-and-mixin-protection">Filter and Mixin Protection</h3>
<div class="sourceCode" id="cb64"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Protected filters</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>:method filter <span class="ot">args</span> <span class="kw">{</span> next <span class="kw">}</span>        # Protected filter</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>:private method filter <span class="ot">args</span> <span class="kw">{</span> next <span class="kw">}</span> # Private filter</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>obj object filters <span class="ot">add</span> filter       # Add filter</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Protected mixins</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>:protected method mixin <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mixin implementation</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>Class <span class="ot">create</span> obj <span class="kw">{</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    :public object mixins <span class="ot">add</span> Mixin # Add mixin</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="best-practices-2">Best Practices</h3>
<div class="sourceCode" id="cb65"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encapsulation pattern</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>:private method internal <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Internal implementation</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>:public method interface <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    :internal                     # Use internal method</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Protected factory pattern</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>:protected method create_impl <span class="kw">{</span><span class="ot">type</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation details</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>:public method <span class="ot">create</span> <span class="kw">{</span><span class="ot">type</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    :create_impl <span class="dt">$type</span>           # Use protected factory</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Visibility inheritance</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>:public method <span class="ot">parent</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>    next                           # Call parent&#39;s public method</span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>:protected method child <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>    next                           # Call parent&#39;s protected method</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="error-handling-1">Error Handling</h3>
<div class="sourceCode" id="cb66"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Protected method error</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="kw">{[catch</span> <span class="kw">{</span>obj protectedMethod<span class="kw">}</span> err<span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Handle protection error</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">puts</span> <span class="st">&quot;Access denied: </span><span class="dt">$</span><span class="st">err&quot;</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Safe dispatch</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="kw">{[</span>::nsf::method::property Class method call-protected<span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>    nx::dispatch obj method <span class="ot">args</span>   # Use safe dispatch</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> <span class="kw">else</span> <span class="kw">{</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>    obj method <span class="ot">args</span>               # Direct call</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="property-patterns">Property Patterns</h2>
<h3 id="basic-property-definition">Basic Property Definition</h3>
<div class="sourceCode" id="cb67"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple property</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span> value<span class="kw">}</span>                # Property with <span class="ot">default</span> value</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Property with accessor</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> public <span class="kw">{</span>prop val<span class="kw">}</span> # Public accessor</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> protected <span class="kw">{</span>prop val<span class="kw">}</span> # Protected accessor</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> private <span class="kw">{</span>prop val<span class="kw">}</span> # Private accessor</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> none <span class="kw">{</span>prop val<span class="kw">}</span>   # No accessor</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable properties</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>:<span class="kw">variable</span> var value                   # Simple <span class="kw">variable</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>:<span class="kw">variable</span><span class="ot"> -accessor</span> public var value  # Public <span class="kw">variable</span></span></code></pre></div>
<h3 id="property-configuration">Property Configuration</h3>
<div class="sourceCode" id="cb68"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Configurable properties</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -configurable</span> true <span class="kw">{</span>prop val<span class="kw">}</span>  # Can be configured</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -configurable</span> false <span class="kw">{</span>prop val<span class="kw">}</span> # Fixed value (like <span class="kw">variable</span>)</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Property initialization</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span> <span class="st">&quot;default&quot;</span><span class="kw">}</span>            # String <span class="ot">default</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>count <span class="dv">0</span><span class="kw">}</span>                   # Numeric <span class="ot">default</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>active:boolean true<span class="kw">}</span>       # Typed with <span class="ot">default</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Property options</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -incremental</span> <span class="kw">{</span>prop val<span class="kw">}</span>     # Incremental updates</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -trace</span> <span class="kw">{</span>prop val<span class="kw">}</span>           # Add <span class="kw">trace</span> handler</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -class</span> <span class="kw">{</span>prop val<span class="kw">}</span>           # Class-<span class="ot">level</span> property</span></code></pre></div>
<h3 id="property-access-1">Property Access</h3>
<div class="sourceCode" id="cb69"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Direct access</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">cget -propName</span>                    # Get property value</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">configure -propName</span> value         # Set property value</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessor methods</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>obj propName                          # Get value (<span class="kw">if</span> public)</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>obj propName value                    # Set value (<span class="kw">if</span> public)</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Protected access</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>:public method wrapper <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    :protectedProp                  # Access protected property</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="property-introspection">Property Introspection</h3>
<div class="sourceCode" id="cb70"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Property information</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> lookup syntax <span class="ot">configure</span>      # List configurable properties</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> slots                        # List all slots</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> lookup method propName       # Get accessor method</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Property definition</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>::Class::slot::propName definition    # Get property definition</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Property protection</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>nsf::method::property Class prop call-protected  # Check protection</span></code></pre></div>
<h3 id="property-patterns-1">Property Patterns</h3>
<div class="sourceCode" id="cb71"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Computed property</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>computed<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    :public method <span class="ot">get</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Compute value</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="dt">$result</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Validated property</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>validated<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>    :public method <span class="kw">set</span> <span class="kw">{</span>value<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[</span>valid <span class="dt">$value</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>            <span class="kw">error</span> <span class="st">&quot;Invalid value&quot;</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">}</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">set</span> :validated <span class="dt">$value</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Observable property</span></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>observed<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>    :public method <span class="kw">set</span> <span class="kw">{</span>value<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>        <span class="kw">set</span> old <span class="dt">${:observed}</span></span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">set</span> :observed <span class="dt">$value</span></span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a>        :notify <span class="dt">$old</span> <span class="dt">$value</span></span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="best-practices-3">Best Practices</h3>
<div class="sourceCode" id="cb72"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Property documentation</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="ot">name</span>:<span class="kw">string</span>                       # Property <span class="ot">type</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    -configurable true                # Configuration</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    -accessor public                  # Access <span class="ot">level</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Default value</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Property validation</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>port:integer,<span class="dv">1024</span>..<span class="dv">65535</span> <span class="dv">8080</span><span class="kw">}</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Property dependencies</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>derived<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>    :public method <span class="ot">get</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">expr</span> <span class="kw">{</span><span class="dt">${:prop1}</span> + <span class="dt">${:prop2}</span><span class="kw">}</span></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Property initialization</span></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>:public method init <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>    next                             # Call <span class="ot">parent</span> init</span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> :prop <span class="kw">[</span>compute_initial_value<span class="kw">]</span></span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="submethod-patterns">Submethod Patterns</h2>
<h3 id="basic-submethod-definition">Basic Submethod Definition</h3>
<div class="sourceCode" id="cb73"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple submethods</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;parent child&quot;</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Nested submethods</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;parent child grandchild&quot;</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Object submethods</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>:object method <span class="st">&quot;cmd subcmd&quot;</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="submethod-parameters">Submethod Parameters</h3>
<div class="sourceCode" id="cb74"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter validation</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;cmd subcmd&quot;</span> <span class="kw">{</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    arg:integer                       # Type validation</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    -flag:boolean                     # Optional flag</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Complex parameters</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;api call&quot;</span> <span class="kw">{</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    <span class="ot">x</span>:integer                         # Required integer</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>    -<span class="ot">y</span>:boolean                        # Optional boolean</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    <span class="ot">args</span>                             # Additional <span class="ot">args</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation</span></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="submethod-dispatch">Submethod Dispatch</h3>
<div class="sourceCode" id="cb75"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic dispatch</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">parent</span> child                      # Call submethod</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Nested dispatch</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">parent</span> child grandchild           # Call nested submethod</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Error handling</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="kw">{[catch</span> <span class="kw">{</span>obj cmd <span class="kw">unknown}</span> err<span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Handle unknown submethod</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="submethod-patterns-1">Submethod Patterns</h3>
<div class="sourceCode" id="cb76"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Command group pattern</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>:object method <span class="st">&quot;string length&quot;</span> <span class="kw">{</span>str<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">string</span> <span class="ot">length</span> <span class="dt">$str</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>:object method <span class="st">&quot;string tolower&quot;</span> <span class="kw">{</span>str<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">string</span> <span class="ot">tolower</span> <span class="dt">$str</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>:object method <span class="st">&quot;string info&quot;</span> <span class="kw">{</span>str<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[string</span> <span class="ot">is</span> <span class="dt">$str</span><span class="kw">]</span></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Default method</span></span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>:object method <span class="st">&quot;cmd defaultmethod&quot;</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Handle unknown submethods</span></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Unknown handler</span></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>:object method <span class="st">&quot;cmd unknown&quot;</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Handle unknown submethods</span></span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span></span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="submethod-introspection">Submethod Introspection</h3>
<div class="sourceCode" id="cb77"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List submethods</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>obj cmd                              # Shows valid submethods</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Submethod validation</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="kw">{[</span>obj <span class="kw">info</span> methods <span class="st">&quot;cmd subcmd&quot;</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Submethod exists</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Error messages</span></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>obj invalidCmd                       # Shows valid submethods</span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>obj cmd invalidSubcmd               # Shows valid subcmds</span></code></pre></div>
<h3 id="best-practices-4">Best Practices</h3>
<div class="sourceCode" id="cb78"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Submethod organization</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;api get user&quot;</span> <span class="kw">{</span><span class="ot">id</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get user</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;api get group&quot;</span> <span class="kw">{</span><span class="ot">id</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get group</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;api create user&quot;</span> <span class="kw">{</span>data<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create user</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Validation pattern</span></span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;validate input&quot;</span> <span class="kw">{</span>data<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Input validation</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;validate output&quot;</span> <span class="kw">{</span>data<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Output validation</span></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Operation grouping</span></span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;db connect&quot;</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># DB connection</span></span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;db query&quot;</span> <span class="kw">{</span>sql<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># DB query</span></span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb78-27"><a href="#cb78-27" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;db disconnect&quot;</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb78-28"><a href="#cb78-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># DB disconnect</span></span>
<span id="cb78-29"><a href="#cb78-29" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="error-handling-2">Error Handling</h3>
<div class="sourceCode" id="cb79"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom error messages</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;cmd subcmd&quot;</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[</span>valid <span class="dt">$args</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">error</span> <span class="st">&quot;Invalid arguments for cmd subcmd&quot;</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Submethod not found</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;cmd unknown&quot;</span> <span class="kw">{</span>subcmd <span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">error</span> <span class="st">&quot;Unknown subcmd &#39;</span><span class="dt">$</span><span class="st">subcmd&#39; for cmd&quot;</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter validation</span></span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;api call&quot;</span> <span class="kw">{</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>    -required:required                # Must be provided</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    -optional                        # Optional parameter</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Implementation</span></span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="method-introspection-2">Method Introspection</h2>
<h3 id="basic-method-information">Basic Method Information</h3>
<div class="sourceCode" id="cb80"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List methods</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods                      # All methods</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -callprotection</span> all  # All methods with protection</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods pattern*             # Pattern matching</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Method lookup</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> lookup method methodName     # Get method <span class="ot">handle</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> lookup methods methodName    # Get all matching methods</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Method definition</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method definition methodName # Get method definition</span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method <span class="ot">args</span> methodName       # Get method arguments</span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method <span class="ot">body</span> methodName       # Get method <span class="ot">body</span></span></code></pre></div>
<h3 id="method-types-1">Method Types</h3>
<div class="sourceCode" id="cb81"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by method type</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> method         # Direct methods</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> forward        # Forward methods</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> alias          # Alias methods</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -type</span> property       # Property methods</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Object methods</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> object methods              # Object-specific methods</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> object method definition <span class="ot">name</span> # Get object method def</span></code></pre></div>
<h3 id="method-protection">Method Protection</h3>
<div class="sourceCode" id="cb82"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Protection information</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -callprotection</span> all  # Show all protection levels</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>nsf::method::property Class method call-protected # Check protection</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Protection filtering</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -protection</span> public   # Public methods</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -protection</span> protected # Protected methods</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> methods<span class="ot"> -protection</span> private  # Private methods</span></code></pre></div>
<h3 id="method-inheritance">Method Inheritance</h3>
<div class="sourceCode" id="cb83"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Superclass methods</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>Class <span class="kw">info</span> superclasses              # Direct superclasses</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>Class <span class="kw">info</span> superclasses<span class="ot"> -closure</span>     # All superclasses</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Method inheritance</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> lookup method <span class="ot">name</span>          # Find inherited method</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> precedence                  # Method resolution order</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Pattern matching</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>Class <span class="kw">info</span> superclasses ::pattern*   # Qualified pattern</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>Class <span class="kw">info</span> superclasses pattern*     # Unqualified pattern</span></code></pre></div>
<h3 id="method-components">Method Components</h3>
<div class="sourceCode" id="cb84"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method details</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method <span class="ot">args</span> methodName      # Parameter <span class="kw">list</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method <span class="ot">body</span> methodName      # Method <span class="ot">body</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method definition methodName # Full definition</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Method properties</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method protection methodName # Protection <span class="ot">level</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method <span class="ot">type</span> methodName      # Method <span class="ot">type</span></span></code></pre></div>
<h3 id="advanced-introspection">Advanced Introspection</h3>
<div class="sourceCode" id="cb85"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method registration</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method registrationhandle <span class="ot">name</span> # Get <span class="ot">handle</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Method existence</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="kw">{[</span>obj <span class="kw">info</span> methods methodName<span class="kw">]</span> ne <span class="st">&quot;&quot;</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method exists</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Method origin</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method origin methodName    # Where method <span class="ot">is</span> defined</span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Method filters</span></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> filters                     # List filters</span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>obj <span class="kw">info</span> method filters methodName   # Method-specific filters</span></code></pre></div>
<h3 id="best-practices-5">Best Practices</h3>
<div class="sourceCode" id="cb86"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Safe method calling</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="kw">{[</span>obj <span class="kw">info</span> lookup method <span class="ot">name</span><span class="kw">]</span> ne <span class="st">&quot;&quot;</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>    obj <span class="ot">name</span> <span class="ot">args</span>                    # Call <span class="kw">if</span> <span class="ot">exists</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Method documentation</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>:public method documented <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> def <span class="kw">[</span>:<span class="kw">info</span> method definition <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]]</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">$def</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Method analysis</span></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>:public method analyze <span class="kw">{</span>methodName<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> <span class="ot">args</span> <span class="kw">[</span>:<span class="kw">info</span> method <span class="ot">args</span> <span class="dt">$methodName</span><span class="kw">]</span></span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> <span class="ot">body</span> <span class="kw">[</span>:<span class="kw">info</span> method <span class="ot">body</span> <span class="dt">$methodName</span><span class="kw">]</span></span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> prot <span class="kw">[</span>:<span class="kw">info</span> method protection <span class="dt">$methodName</span><span class="kw">]</span></span>
<span id="cb86-17"><a href="#cb86-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Analysis code</span></span>
<span id="cb86-18"><a href="#cb86-18" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb86-19"><a href="#cb86-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-20"><a href="#cb86-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Dynamic method handling</span></span>
<span id="cb86-21"><a href="#cb86-21" aria-hidden="true" tabindex="-1"></a>:public method <span class="ot">handle</span> <span class="kw">{</span><span class="ot">name</span> <span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb86-22"><a href="#cb86-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{[</span>:<span class="kw">info</span> methods <span class="dt">$name</span><span class="kw">]</span> ne <span class="st">&quot;&quot;</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb86-23"><a href="#cb86-23" aria-hidden="true" tabindex="-1"></a>        :<span class="dt">$name</span> <span class="kw">{</span>*<span class="kw">}</span><span class="dt">$args</span></span>
<span id="cb86-24"><a href="#cb86-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span> <span class="kw">else</span> <span class="kw">{</span></span>
<span id="cb86-25"><a href="#cb86-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">error</span> <span class="st">&quot;Unknown method: </span><span class="dt">$</span><span class="st">name&quot;</span></span>
<span id="cb86-26"><a href="#cb86-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb86-27"><a href="#cb86-27" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="method-patterns">Method Patterns</h2>
<h3 id="method-definition-patterns-1">Method Definition Patterns</h3>
<div class="sourceCode" id="cb87"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic method types</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>                    # Standard method</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>:public method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>            # Public method</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>:protected method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>         # Protected method</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>:private method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>           # Private method</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Special method types</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>:abstract method <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span>                 # Abstract method</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>:forward <span class="ot">name</span> targetObj targetMethod         # Forward method</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>:alias <span class="ot">name</span> methodHandle                     # Alias method</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Method options</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -returns</span> <span class="ot">type</span> <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>     # Specify <span class="kw">return</span> <span class="ot">type</span></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -deprecated</span> msg <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>   # Mark as deprecated</span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -debug</span> <span class="ot">level</span> <span class="ot">name</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>      # Set <span class="ot">debug</span> <span class="ot">level</span></span></code></pre></div>
<h3 id="method-protection-and-visibility-1">Method Protection and
Visibility</h3>
<div class="sourceCode" id="cb88"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Protection levels</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>:public method <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>                # Accessible by anyone</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>:protected method <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>             # Accessible by <span class="ot">class</span> and subclasses</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>:private method <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>               # Only accessible within <span class="ot">class</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Dispatch based on protection</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>obj method                                   # Call public method</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>::nsf::dispatch obj protectedMethod          # Call protected method</span></code></pre></div>
<h3 id="method-patterns-with-self">Method Patterns with Self</h3>
<div class="sourceCode" id="cb89"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Self-referential patterns</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span>self<span class="kw">]</span>                                   # Get <span class="ot">current</span> object</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span><span class="ot">current</span> method<span class="kw">]</span>                         # Get <span class="ot">current</span> method <span class="ot">name</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span><span class="ot">current</span> <span class="ot">args</span><span class="kw">]</span>                           # Get <span class="ot">current</span> arguments</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span><span class="ot">current</span> object<span class="kw">]</span>                         # Get <span class="ot">current</span> object</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Method chaining</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>:method chain <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span>self<span class="kw">]</span> method1                          # Chain method1</span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span>self<span class="kw">]</span> method2                          # Chain method2</span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="ensemble-subcommand-methods">Ensemble (Subcommand) Methods</h3>
<div class="sourceCode" id="cb90"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First-level subcommands</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;Info filter&quot;</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>          # First-<span class="ot">level</span> ensemble</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;Info methods&quot;</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>         # Another <span class="ot">first</span>-<span class="ot">level</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Multi-level subcommands</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;Info filter guard&quot;</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>    # Second-<span class="ot">level</span> ensemble</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;Info filter methods&quot;</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>  # Another second-<span class="ot">level</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Object-specific ensembles</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>:object method <span class="st">&quot;list length&quot;</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>       # Object ensemble</span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>:object method <span class="st">&quot;list reverse&quot;</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>      # Another object ensemble</span></code></pre></div>
<h3 id="method-copying-and-moving">Method Copying and Moving</h3>
<div class="sourceCode" id="cb91"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy methods</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>::nsf::method::<span class="ot">copy</span> srcObj srcMethod destObj destMethod</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Move methods</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>::nsf::method::<span class="ot">move</span> srcObj srcMethod destObj destMethod</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Delete methods</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>::nsf::method::<span class="ot">delete</span> Class methodName           # Delete instance method</span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>::nsf::method::<span class="ot">delete</span> Class<span class="ot"> -per</span>-object methodName # Delete object method</span></code></pre></div>
<h3 id="unknown-method-handling">Unknown Method Handling</h3>
<div class="sourceCode" id="cb92"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic unknown handler</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>:object method <span class="kw">unknown</span> <span class="kw">{</span><span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Handle unknown method</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="st">&quot;unknown-</span><span class="dt">$</span><span class="st">args&quot;</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Pattern-based unknown</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>:object method <span class="kw">unknown</span> <span class="kw">{</span>methodName <span class="ot">args</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">switch</span><span class="ot"> -glob</span> <span class="dt">$methodName</span> <span class="kw">{</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;pattern1*&quot;</span> <span class="kw">{</span> # Handle pattern1 <span class="kw">}</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;pattern2*&quot;</span> <span class="kw">{</span> # Handle pattern2 <span class="kw">}</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>        <span class="ot">default</span> <span class="kw">{</span> <span class="kw">error</span> <span class="st">&quot;Unknown method: </span><span class="dt">$</span><span class="st">methodName&quot;</span> <span class="kw">}</span></span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="method-assertions-and-validation">Method Assertions and
Validation</h3>
<div class="sourceCode" id="cb93"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method assertions</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span> <span class="kw">{}</span> <span class="kw">{{</span>condition<span class="kw">}}</span>      # Add postcondition</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[</span>precondition<span class="kw">]}</span> <span class="kw">{</span> <span class="kw">error</span> <span class="st">&quot;Failed&quot;</span> <span class="kw">}</span>  # Add precondition</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">body</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable assertions</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>nsf::method::assertion obj check all         # Enable all checks</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>nsf::method::assertion obj <span class="ot">class</span>-invar <span class="ot">script</span> # Class invariant</span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>nsf::method::assertion obj object-invar <span class="ot">script</span> # Object invariant</span></code></pre></div>
<h3 id="method-interception-1">Method Interception</h3>
<div class="sourceCode" id="cb94"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter definition</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>:public filter <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pre-processing</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> result <span class="kw">[</span>next <span class="kw">{</span>*<span class="kw">}</span><span class="dt">$args</span><span class="kw">]</span>               # Call next method</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Post-processing</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">$result</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Mixin interception</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>:public method <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pre-processing</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> result <span class="kw">[</span>next<span class="kw">]</span>                        # Call next method</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Post-processing</span></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">$result</span></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="method-properties-and-debug">Method Properties and Debug</h3>
<div class="sourceCode" id="cb95"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set method properties</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>::nsf::method::property <span class="ot">class</span> method property value</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Common properties</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>call-protected          # Mark method as protected</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>call-private           # Mark method as private</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="ot">class</span>-only            # Class-only method</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>returns              # Return <span class="ot">type</span> constraint</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Debug and deprecation</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -debug</span> <span class="dv">1</span> <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>            # Enable debugging</span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>:method<span class="ot"> -deprecated</span> <span class="st">&quot;Use newMethod&quot;</span> <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>  # Mark deprecated</span></code></pre></div>
<h3 id="best-practices-6">Best Practices</h3>
<div class="sourceCode" id="cb96"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method naming</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>:method lowerCamelCase <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>           # Instance methods</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>:method _prefixPrivate <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>           # Private methods</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>:method <span class="st">&quot;Namespace Command&quot;</span> <span class="kw">{}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>       # Ensemble methods</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Documentation</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>    arg1:<span class="ot">type</span>                              # Type constraint</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>    -arg2:<span class="ot">type</span>                             # Named parameter</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>    ?-arg3:<span class="ot">type</span>?                           # Optional parameter</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method documentation</span></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>    <span class="ot">body</span></span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Error handling</span></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{[catch</span> <span class="kw">{</span>operation<span class="kw">}</span> result<span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">error</span> <span class="st">&quot;Operation failed: </span><span class="dt">$</span><span class="st">result&quot;</span></span>
<span id="cb96-20"><a href="#cb96-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb96-21"><a href="#cb96-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">$result</span></span>
<span id="cb96-22"><a href="#cb96-22" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h2 id="parameter-patterns">Parameter Patterns</h2>
<h3 id="basic-parameter-types">Basic Parameter Types</h3>
<div class="sourceCode" id="cb97"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Property parameters</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>                              # Simple property</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span><span class="kw">}</span>                       # Typed property</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span> <span class="ot">default</span><span class="kw">}</span>               # Property with <span class="ot">default</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:required                     # Required property</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Method parameters</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>    arg1                                    # Required parameter</span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>    arg2:optional                           # Optional parameter</span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>    arg3:required                           # Required parameter</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>    <span class="ot">args</span>                                    # Variable arguments</span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Type constraints</span></span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:integer<span class="kw">}</span>                    # Integer property</span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:boolean<span class="kw">}</span>                    # Boolean property</span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:double<span class="kw">}</span>                     # Double property</span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="kw">string}</span>                     # String property</span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:object<span class="kw">}</span>                     # Object reference</span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">class</span><span class="kw">}</span>                      # Class reference</span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:metaclass<span class="kw">}</span>                  # Metaclass reference</span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:baseclass<span class="kw">}</span>                  # Base <span class="ot">class</span> reference</span></code></pre></div>
<h3 id="parameter-multiplicity">Parameter Multiplicity</h3>
<div class="sourceCode" id="cb98"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Single values</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:<span class="ot">type</span>                         # Single value</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple values</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:<span class="ot">type</span>,<span class="dv">0</span>..n                    # Zero or more <span class="ot">values</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:<span class="ot">type</span>,<span class="dv">1</span>..n                    # One or more <span class="ot">values</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:<span class="ot">type</span>,<span class="dv">0</span>..<span class="dv">1</span>                    # Optional single value</span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:<span class="ot">type</span>,<span class="dv">1</span>..<span class="dv">1</span>                    # Required single value</span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:<span class="ot">type</span>,n..m                    # Between n and m <span class="ot">values</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Method parameter multiplicity</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>    <span class="ot">args</span>:<span class="ot">type</span>,<span class="dv">0</span>..n                         # Variable <span class="ot">number</span> of typed <span class="ot">args</span></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a>    <span class="ot">values</span>:integer,<span class="dv">1</span>..*                    # One or more integers</span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a>    objects:object,<span class="dv">0</span>..*                    # Zero or more objects</span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="parameter-validation">Parameter Validation</h3>
<div class="sourceCode" id="cb99"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Type validation</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:integer,nonNegative<span class="kw">}</span>        # Non-negative integer</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="kw">string</span>,nonempty<span class="kw">}</span>            # Non-empty <span class="kw">string</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:object,<span class="ot">type</span>=ClassName<span class="kw">}</span>      # Object of specific <span class="ot">type</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom validation</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">validate</span> <span class="kw">{</span>value<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[</span>valid <span class="dt">$value</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">error</span> <span class="st">&quot;Invalid value: </span><span class="dt">$</span><span class="st">value&quot;</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">$value</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter checking</span></span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span>param:<span class="ot">type</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[</span>::nsf::<span class="ot">is</span> <span class="dt">$type</span> <span class="dt">$param</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb99-17"><a href="#cb99-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">error</span> <span class="st">&quot;Invalid parameter type&quot;</span></span>
<span id="cb99-18"><a href="#cb99-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb99-19"><a href="#cb99-19" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb99-20"><a href="#cb99-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-21"><a href="#cb99-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Value constraints</span></span>
<span id="cb99-22"><a href="#cb99-22" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:integer,min=<span class="dv">0</span>,max=<span class="dv">100</span><span class="kw">}</span>      # Integer <span class="ot">range</span></span>
<span id="cb99-23"><a href="#cb99-23" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="kw">string</span>,<span class="kw">regexp</span>=pattern<span class="kw">}</span>      # String pattern <span class="ot">match</span></span>
<span id="cb99-24"><a href="#cb99-24" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:enum=red,green,blue<span class="kw">}</span>        # Enumeration</span></code></pre></div>
<h3 id="parameter-configuration">Parameter Configuration</h3>
<div class="sourceCode" id="cb100"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Property configuration</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> public <span class="ot">name</span>             # Public accessor</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> protected <span class="ot">name</span>          # Protected accessor</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -configurable</span> boolean <span class="ot">name</span>        # Configurable property</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -incremental</span> boolean <span class="ot">name</span>         # Incremental updates</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Method parameter configuration</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>    -param:required                         # Required named parameter</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>    -flag:boolean                          # Boolean flag parameter</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>    -value:<span class="ot">type</span>,<span class="ot">default</span>                    # Parameter with <span class="ot">default</span></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch parameters</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>:property foo:<span class="kw">switch</span>                        # Switch property (<span class="ot">default</span> false)</span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>foo:<span class="kw">switch</span> <span class="dv">1</span><span class="kw">}</span>                    # Switch property (<span class="ot">default</span> true)</span></code></pre></div>
<h3 id="parameter-inheritance">Parameter Inheritance</h3>
<div class="sourceCode" id="cb101"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Class inheritance</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span><span class="kw">}</span>                       # Base <span class="ot">class</span> property</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">name</span> <span class="kw">{</span>param:<span class="ot">type</span><span class="kw">}</span> <span class="kw">{</span><span class="ot">body</span><span class="kw">}</span>           # Base <span class="ot">class</span> method</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Mixin parameters</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>Class mixins <span class="kw">set</span> <span class="kw">{</span></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>    Mixin1                                 # Add mixin parameters</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">{</span>Mixin2<span class="ot"> -param</span> value<span class="kw">}</span>                  # Mixin with parameters</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter precedence</span></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span><span class="kw">}</span>                      # Class property</span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>:object property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span><span class="kw">}</span>               # Object property (overrides)</span></code></pre></div>
<h3 id="parameter-patterns-with-self">Parameter Patterns with Self</h3>
<div class="sourceCode" id="cb102"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Self-referential patterns</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:substdefault <span class="st">&quot;[current]&quot;</span><span class="kw">}</span>   # Current object</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:substdefault <span class="st">&quot;[:info class]&quot;</span><span class="kw">}</span> # Current <span class="ot">class</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:substdefault <span class="st">&quot;[:cget -prop]&quot;</span><span class="kw">}</span> # Property value</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter initialization</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>:method init <span class="kw">{}</span> <span class="kw">{</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>    next                                   # Call <span class="ot">parent</span> init</span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> :param <span class="kw">[</span>compute_initial_value<span class="kw">]</span>     # Initialize parameter</span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="best-practices-7">Best Practices</h3>
<div class="sourceCode" id="cb103"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter naming</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>:property lowerCamelCase                     # Property <span class="ot">names</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>:property _privateProp                       # Private properties</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>:property publicProp                         # Public properties</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Documentation</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span> <span class="st">&quot;doc&quot;</span><span class="kw">}</span>                  # Document <span class="ot">type</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>count:integer <span class="st">&quot;Item count&quot;</span><span class="kw">}</span>       # Document purpose</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>-flag:boolean <span class="st">&quot;Enable feature&quot;</span><span class="kw">}</span>   # Document flag</span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Validation</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>value:integer,positive<span class="kw">}</span>           # Enforce positive integers</span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="kw">string</span>,nonempty<span class="kw">}</span>             # Enforce non-empty strings</span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">type</span>:enum=a,b,c<span class="kw">}</span>                 # Enforce valid options</span></code></pre></div>
<h3 id="advanced-parameter-features">Advanced Parameter Features</h3>
<div class="sourceCode" id="cb104"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter aliases</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:alias<span class="kw">}</span>                      # Simple alias</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:alias,method=methodName<span class="kw">}</span>    # Method alias</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter forwarding</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:forward,method=%self method %<span class="dv">1</span><span class="kw">}</span> # Forward to method</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter tracing</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -trace</span> <span class="kw">set</span> <span class="ot">name</span> <span class="kw">{</span>                 # Trace property changes</span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>    :public object method value=<span class="kw">set</span> <span class="kw">{</span>obj var val<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Handle value change</span></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter cache operations</span></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a>::nsf::parameter::cache::classinvalidate <span class="ot">class</span>    # Invalidate <span class="ot">class</span> cache</span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>::nsf::parameter::cache::objectinvalidate obj     # Invalidate object cache</span></code></pre></div>
<h3 id="advanced-parameter-types">Advanced Parameter Types</h3>
<div class="sourceCode" id="cb105"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch parameters</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>:property foo:<span class="kw">switch</span>                        # Switch property (<span class="ot">default</span> false)</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>foo:<span class="kw">switch</span> <span class="dv">1</span><span class="kw">}</span>                    # Switch property (<span class="ot">default</span> true)</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Object type parameters with namespace binding</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>:property obj:object,<span class="ot">type</span>=ClassName         # Unqualified <span class="ot">name</span> (binds to <span class="ot">current</span> ns)</span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>:property obj:object,<span class="ot">type</span>=::ns::Class      # Fully qualified <span class="ot">name</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>:property obj:object,<span class="ot">type</span>=ns::Class        # Relative <span class="kw">namespace</span> path</span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter value checking</span></span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>:property count:integer,nonNegative         # Non-negative integer</span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:<span class="kw">string</span>,nonempty              # Non-empty <span class="kw">string</span></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">level</span>:integer,<span class="dv">0</span>..<span class="dv">10</span>               # Integer <span class="ot">range</span></span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">type</span>:enum=red,green,blue          # Enumeration</span></code></pre></div>
<h3 id="parameter-value-handling">Parameter Value Handling</h3>
<div class="sourceCode" id="cb106"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Value changed handlers</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>:property prop <span class="kw">{</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>    :public object method value=<span class="kw">set</span> <span class="kw">{</span>obj var value<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Handle value change</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>        ::nsf::var::<span class="kw">set</span><span class="ot"> -notrace</span> <span class="dt">$obj</span> <span class="dt">$var</span> <span class="kw">[expr</span> <span class="kw">{</span><span class="dt">$value</span> + <span class="dv">1</span><span class="kw">}]</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Value trace handlers</span></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -trace</span> <span class="kw">set</span> prop <span class="kw">{</span></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>    :public object method value=<span class="kw">set</span> <span class="kw">{</span>obj var value<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Handle value change with trace</span></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a>        ::nsf::var::<span class="kw">set</span> <span class="dt">$obj</span> <span class="dt">$var</span> <span class="dt">$value</span></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Value initialization</span></span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true" tabindex="-1"></a>:property prop <span class="kw">{</span></span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true" tabindex="-1"></a>    :public object method initialize <span class="kw">{</span>obj var<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb106-20"><a href="#cb106-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Initialize property</span></span>
<span id="cb106-21"><a href="#cb106-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">set</span> :initCount <span class="dv">1</span></span>
<span id="cb106-22"><a href="#cb106-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb106-23"><a href="#cb106-23" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="parameter-validation-and-type-checking">Parameter Validation and
Type Checking</h3>
<div class="sourceCode" id="cb107"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Type validation with constraints</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>port:integer,<span class="dv">1024</span>..<span class="dv">65535</span> <span class="dv">8080</span><span class="kw">}</span>   # Port <span class="ot">number</span> with <span class="ot">range</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{list</span>:<span class="kw">string</span>,nonempty <span class="st">&quot;&quot;</span><span class="kw">}</span>         # Non-empty <span class="kw">string</span> <span class="kw">list</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>obj:object,<span class="ot">type</span>=::C<span class="kw">}</span>             # Object with specific <span class="ot">type</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom validation</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>:property prop <span class="kw">{</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>    :public object method value=<span class="kw">set</span> <span class="kw">{</span>obj var value<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[</span>valid <span class="dt">$value</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>            <span class="kw">error</span> <span class="st">&quot;Invalid value: </span><span class="dt">$</span><span class="st">value&quot;</span></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">}</span></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a>        ::nsf::var::<span class="kw">set</span> <span class="dt">$obj</span> <span class="dt">$var</span> <span class="dt">$value</span></span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter checking</span></span>
<span id="cb107-17"><a href="#cb107-17" aria-hidden="true" tabindex="-1"></a>:method <span class="ot">validate</span> <span class="kw">{</span>value:<span class="ot">type</span><span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb107-18"><a href="#cb107-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="kw">{</span>!<span class="kw">[</span>::nsf::<span class="ot">is</span> <span class="dt">$type</span> <span class="dt">$value</span><span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb107-19"><a href="#cb107-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">error</span> <span class="st">&quot;Invalid parameter type&quot;</span></span>
<span id="cb107-20"><a href="#cb107-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb107-21"><a href="#cb107-21" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<h3 id="parameter-configuration-and-defaults">Parameter Configuration
and Defaults</h3>
<div class="sourceCode" id="cb108"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Default value handling</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:substdefault <span class="st">&quot;[self]&quot;</span><span class="kw">}</span>       # Self-referential <span class="ot">default</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>path:substdefault <span class="st">&quot;[pwd]&quot;</span><span class="kw">}</span>        # Command substitution <span class="ot">default</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter configuration</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -configurable</span> true prop            # Allow runtime configuration</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -configurable</span> false prop           # Fixed value (like <span class="kw">variable</span>)</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -incremental</span> prop                  # Support incremental updates</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -trace</span> <span class="kw">{</span><span class="ot">get</span> <span class="kw">set}</span> prop             # Add <span class="ot">get</span>/<span class="kw">set</span> traces</span></code></pre></div>
<h3 id="parameter-inheritance-and-scope">Parameter Inheritance and
Scope</h3>
<div class="sourceCode" id="cb109"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Class-level parameters</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>:object property <span class="kw">{</span><span class="ot">name</span> value<span class="kw">}</span>                # Class property</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>:object property<span class="ot"> -accessor</span> public prop       # Public <span class="ot">class</span> property</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Instance-level parameters</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span> value<span class="kw">}</span>                       # Instance property</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>:property<span class="ot"> -accessor</span> protected prop           # Protected instance property</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter precedence</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>:property prop                               # Base definition</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>:object property prop                        # Override in object</span></code></pre></div>
<h3 id="parameter-error-handling">Parameter Error Handling</h3>
<div class="sourceCode" id="cb110"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Error propagation</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>:property prop <span class="kw">{</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>    :public object method value=<span class="kw">set</span> <span class="kw">{</span>obj var value<span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="kw">{[catch</span> <span class="kw">{</span><span class="ot">validate</span> <span class="dt">$value</span><span class="kw">}</span> err<span class="kw">]}</span> <span class="kw">{</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>            <span class="kw">error</span> <span class="st">&quot;Validation failed: </span><span class="dt">$</span><span class="st">err&quot;</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">}</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>        next</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Type error messages</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>:property obj:object,<span class="ot">type</span>=::C                # <span class="st">&quot;expected object of type ::C&quot;</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a>:property count:integer                      # <span class="st">&quot;expected integer but got...&quot;</span></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a>:property <span class="ot">name</span>:required                      # <span class="st">&quot;required parameter not given&quot;</span></span></code></pre></div>
<h3 id="best-practices-8">Best Practices</h3>
<div class="sourceCode" id="cb111"><pre
class="sourceCode tcl"><code class="sourceCode tcl"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter naming</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>:property lowerCamelCase                     # Property <span class="ot">names</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>:property _privateProp                       # Private properties</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>:property publicProp                         # Public properties</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Documentation</span></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="ot">type</span> <span class="st">&quot;doc&quot;</span><span class="kw">}</span>                  # Document <span class="ot">type</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>count:integer <span class="st">&quot;Item count&quot;</span><span class="kw">}</span>       # Document purpose</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>-flag:boolean <span class="st">&quot;Enable feature&quot;</span><span class="kw">}</span>   # Document flag</span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Validation</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span>value:integer,positive<span class="kw">}</span>           # Enforce positive integers</span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">name</span>:<span class="kw">string</span>,nonempty<span class="kw">}</span>             # Enforce non-empty strings</span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a>:property <span class="kw">{</span><span class="ot">type</span>:enum=a,b,c<span class="kw">}</span>                 # Enforce valid options</span></code></pre></div>
</body>
</html>
